import{a9 as u,aa as j,j as t,a8 as x,r as i,ab as p}from"./index-CiXcBVMD.js";const d="https://tetris.duckdns.org",k=async()=>{const{accessToken:e}=u.getState(),s=`${d}/api/test/checkaccesstoken`,o=await(await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${e}`},credentials:"include"})).json();console.log(o)},m=async()=>{const{accessToken:e}=u.getState(),s=`${d}/api/test/optioncheckaccesstoken`,n=await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${e}`},credentials:"include"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const o=await n.json();console.log(o)},w=async()=>{const e=await j(),s=`${d}/api/test/checkaccesstoken`,n=await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${e}`},credentials:"include"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const o=await n.json();console.log(o)},F=()=>t.jsxs("div",{children:[t.jsxs("div",{children:[t.jsx("h1",{children:"TestAuthPage"}),t.jsx(x,{to:"/test",children:"Back"})]}),t.jsx(b,{}),t.jsx("hr",{}),t.jsx(S,{}),t.jsx(v,{}),t.jsx(C,{}),t.jsx(T,{}),t.jsx(f,{}),t.jsx(y,{}),t.jsx(E,{}),t.jsx($,{})]}),y=()=>{const e="https://tetris.duckdns.org",s=()=>{location.href=`${e}/api/auth/google/login`};return t.jsxs("div",{children:[t.jsx("h4",{children:"google login"}),t.jsx("button",{onClick:s,children:"login"})]})},T=()=>{const e="https://tetris.duckdns.org",[s,n]=i.useState(""),[o,l]=i.useState(""),[h,r]=i.useState(""),a=async()=>{try{const c=`${e}/api/auth/email/signup`,g=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({nickName:s,email:o,pw:h})});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`)}catch(c){console.error("e",c)}};return t.jsxs("div",{children:[t.jsx("h4",{children:"Email Signup"}),t.jsx("label",{htmlFor:"",children:"nickname"}),t.jsx("input",{type:"text",onChange:c=>n(c.target.value)}),t.jsx("label",{htmlFor:"",children:"email"}),t.jsx("input",{type:"email",onChange:c=>l(c.target.value)}),t.jsx("label",{htmlFor:"",children:"password"}),t.jsx("input",{type:"password",onChange:c=>r(c.target.value)}),t.jsx("button",{onClick:a,children:"singup"})]})},f=()=>{const e="https://tetris.duckdns.org",[s,n]=i.useState(""),[o,l]=i.useState(""),h=async()=>{try{const r=`${e}/api/auth/email/login`,a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:s,pw:o})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`)}catch(r){console.error("e",r)}};return t.jsxs("div",{children:[t.jsx("h4",{children:"email login"}),t.jsx("input",{type:"email",onChange:r=>n(r.target.value)}),t.jsx("input",{type:"password",onChange:r=>l(r.target.value)}),t.jsx("button",{onClick:h,children:"login"})]})},C=()=>{const[e,s]=i.useState(""),n=async()=>{};return t.jsxs("div",{children:[t.jsx("h4",{children:"Guest Login"}),t.jsx("input",{type:"text",onChange:o=>s(o.target.value)}),t.jsx("button",{onClick:n,children:"login"})]})},S=()=>{const e=async()=>{try{await p()}catch(s){console.error("e",s)}};return t.jsxs("div",{children:[t.jsx("h4",{children:"logout"}),t.jsx("button",{onClick:e,children:"logout"})]})},v=()=>{const e=async()=>{};return t.jsxs("div",{children:[t.jsx("h4",{children:"TokenRefresh"}),t.jsx("button",{onClick:e,children:"refresh"})]})},b=()=>{const e="https://tetris.duckdns.org",{accessToken:s}=u();return t.jsxs("div",{children:[t.jsx("h4",{children:"AuthState"}),t.jsxs("p",{children:["apiUrl: ",e]}),t.jsxs("p",{children:["isAuthenticated: ",JSON.stringify(!!s)]}),t.jsxs("p",{children:["accessTokn: ",JSON.stringify(s)]})]})},E=()=>{const e=async()=>{await k()},s=async()=>{await m()},n=async()=>{await w()};return t.jsxs("div",{children:[t.jsx("h4",{children:"SecureFetch"}),t.jsx("button",{onClick:e,children:"check"}),t.jsx("button",{onClick:s,children:"optional check"}),t.jsx("button",{onClick:n,children:"expCheckBeforeFetch"})]})},$=()=>{const e="https://tetris.duckdns.org",s=async()=>{const n=await fetch(`${e}/api/test/error`,{method:"GET"});console.log("status: ",n.status),console.log("statusText: ",n.statusText),console.log("header: ",n.headers);const o=await n.json();console.log("json: ",o)};return t.jsxs("div",{children:[t.jsx("h4",{children:"TestError"}),t.jsx("button",{onClick:s,children:"error"})]})};export{F as default};
